#!/bin/bash

# Purrr.love Management Tools
# Provides easy access to deployment and management scripts

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &> /dev/null && pwd)"

show_help() {
    echo "üê± Purrr.love Management Tools"
    echo ""
    echo "Usage:"
    echo "  ./purrr-tools deploy <target>         Deploy to target (aws, rocky)"
    echo "  ./purrr-tools init-db                Initialize database"
    echo "  ./purrr-tools setup-db               Setup database schema"
    echo "  ./purrr-tools help                   Show this help"
    echo ""
    echo "Direct script access:"
    echo "  ./scripts/deploy.sh                  Main deployment script"
    echo "  ./scripts/init-mysql-db.sh           MySQL database initialization"
    echo "  ./scripts/setup-db.sh                Database setup"
    echo ""
    echo "Documentation:"
    echo "  docs/INSTALL.md                      Installation guide"
    echo "  docs/DEPLOYMENT_STATUS.md            Deployment status"
    echo "  docs/DOCUMENTATION.md                Full documentation"
}

case "${1:-help}" in
    "deploy")
        if [ -z "$2" ]; then
            echo "Error: Deployment target required (aws, rocky)"
            echo "Usage: ./purrr-tools deploy aws --environment production"
            echo "       ./purrr-tools deploy rocky --server your-server.com"
            exit 1
        fi
        echo "üöÄ Deploying Purrr.love to $2..."
        "$SCRIPT_DIR/scripts/deploy.sh" "--$2" "${@:3}"
        ;;
    "init-db")
        echo "üóÑÔ∏è  Initializing MySQL database..."
        "$SCRIPT_DIR/scripts/init-mysql-db.sh" "${@:2}"
        ;;
    "setup-db")
        echo "‚öôÔ∏è  Setting up database schema..."
        "$SCRIPT_DIR/scripts/setup-db.sh" "${@:2}"
        ;;
    "help"|"-h"|"--help")
        show_help
        ;;
    *)
        echo "Unknown command: $1"
        echo "Use './purrr-tools help' for usage information"
        exit 1
        ;;
esac
